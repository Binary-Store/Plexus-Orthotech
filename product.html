<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product - Plexus Orthotech</title>

  <link href="assets/fonts/metropolis.css" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="assets/css/animate.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="shortcut icon" type="image/png" href="assets/images/favicon.png" />
  <link rel="stylesheet" href="assets/css/nice-select.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="assets/css/style.css" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
</head>

<body>
  <div class="hc-nav hc-sections">
    <div class="hc-container">
      <div class="hc-navmainhead">
        <div class="hc-navhead">
          <div class="hc-navheadcall">
            <img src="assets/images/phone.png" class=" ms_bar_img ms_bar_show" alt="logo" />
          </div>
          <p class="hcnavheadtext" style="color: white;">
            For any question call us at
            <a href="tel:+919099133880" class="hcnavheadtext">
              <br class="d-md-none" />
              <span>+91 9099133880</span>
            </a>
          </p>
        </div>
        <div class="hc-navheadicon">
          <a href="https://www.facebook.com/profile.php?id=61556920111263&mibextid=ZbWKwL" class="hc-faceicon">
            <img src="assets/images/facebook.png" class=" ms_bar_img ms_bar_show" width="18px" alt="logo" />
          </a>
          <a href="https://www.youtube.com/@plexusorthotech" class="hc-faceicon">
            <img src="assets/images/youtube.png" width="20px" class=" ms_bar_img ms_bar_show" alt="logo" />
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="hc-header-wrapper hc-sections">
    <div class="hc-container">
      <div class="hc-navbar-wrapper">
        <div class="hc-brand-logo" data-aos="faade-up">
          <a href="./index.html">
            <img src="assets/images/logo.png" class="hc-logo" alt="logo" />
          </a>
          <div class="hc-toggle-btn">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
        <div class="hc-navbar-menu">
          <ul>
            <li class="responsive-logo" data-aos="fade-down">
              <a href="./index.html">
                <img src="assets/images/logo.png" />
              </a>
            </li>
            <li data-aos="fade-down" data-aos-delay="200">
              <a href="./index.html" class="nav_bar_list">Home</a>
            </li>
            <li data-aos="fade-down" data-aos-delay="400">
              <a href="./about.html">About Us</a>
            </li>
            <li class="prdocut_nav active">
              <a href="./product.html?category_id=-1&subcategory_id=-1" class="nav_bar_list" id="product-link">Product
                <span id="product-link-arrow"><img src="./assets/images/down.png" width="20px" /></span></a>
              <div class="mega-menu-container" id="product-menu">
                <div class="mega-menu">
                  <div class="mega-menu-row" id="mega_menu_row">

                  </div>
                </div>
              </div>
            </li>
            <li data-aos="fade-down" data-aos-delay="700">
              <a href="./brochures.html" class="nav_bar_list">Brochures</a>
            </li>
            <li data-aos="fade-down" data-aos-delay="800">
              <a href="./video.html" class="nav_bar_list">Video</a>
            </li>
            <li data-aos="fade-down" data-aos-delay="900">
              <a href="./channelPartner.html" class="nav_bar_list">Channel Partner</a>
            </li>
            <li data-aos="fade-down" data-aos-delay="1000">
              <a href="./career.html" class="nav_bar_list">Career</a>
            </li>
            <li data-aos="fade-down" data-aos-delay="1000">
              <a href="./contact.html" class="nav_bar_list">Contact Us</a>
            </li>

          </ul>
          <div class="overlay"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- product section start -->
  <div class="hc-faq-wrapper hc-sections ">
    <div class="container">
      <div class="hc-news-top">
        <h6 class="hc-news-subhead" data-aos="fade-down">Our Product</h6>
        <h4 class="hc-news-heading" data-aos="fade-down">The Product We Offer</h4>
        <p class="hc-paragraph" data-aos="zoom-in" data-aos-delay="400">Discover our high-quality products designed to
          meet your every need.</p>
        <h6 class="mt-4" id="bredcrum"></h6>
      </div>
      <div class="product-container">
        <!-- <div class="product-sidebar" data-aos="fade-up" data-aos-delay="400">
          <ul id="category-list">
            Dynamic categories and subcategories will be appended here
          </ul>
        </div> -->
        <div class="product-content">
          <div class="product-breadcrumb text-center d-none" id="product-breadcrumb">Products will be Available soon.
          </div>
          <div class="hc-service-row" id="product-list">
            <!-- Dynamic products will be appended here -->

          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- product section end -->

  <!-- Modal -->
  <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="productModalLabel"></h1>
          <button type="button" class="btn-close" id="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="d-flex justify-content-center align-items-center mb-3 w-100">
            <img src="" id="pop_up_image" alt="">
          </div>
          <div id="product_description_container">
            <span class="fw-bold" style="color: #022669;">Cat No :</span>
            <span class="fw-bold" style="color: #6E8DA0;" id="product_id"></span>
            <h6 class="pt-2 fw-bold" style="color: #022669;">Description :</h6>
            <p style="color: #6E8DA0; padding:0rem 1rem;" id="product_desc" class="preserved-content">/p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- footer section start -->
  <div class="hc-footer-wrapper  hc-sections">
    <div class="container">

      <div class="hc-footer-row">
        <div class="hc-footer-rowin" data-aos="faade-up">
          <div class="hc-footer-first">
            <div class="hc-footer-logo hc-boxcontain">
              <a href="./index.html" class="hc-footer-img">
                <img src="assets/images/logo.png" class="hc-footer-mainlogo" alt="logo" />
              </a>
              <div class="hc-footer-btm-links">
                <p class="hc-paragraph">Plexus Orthotech Shed no - 3, B/h Karam Multipack, Nr Radhe
                  Auto industries
                  Gokul restaturant street
                  Shapar main road
                  Shapar, Rajkot- 360024</p>
                <br>
                <a href="tel:+919099133880" class="hc-paragraph link">+91 9099133880</a>
                <br>
                <a href="tel:+919427217406" class="hc-paragraph link">+91 9427217406</a>
                <br>
                <br>
                <a href="mailto:Info@plexusorthotech.com" class="hc-paragraph link">Info@plexusorthotech.com</a>
                <br>
                <a href="mailto:Export@plexusorthotech.com" class="hc-paragraph link">Export@plexusorthotech.com</a>
                <br>
                <a href="mailto:inquiry@plexusorthotech.com" class="hc-paragraph link">inquiry@plexusorthotech.com</a>
              </div>
              <div class="hcflwtext">
                <div class="hc-footer-Icon">
                  <div class="linkedin">
                    <a href="https://www.facebook.com/profile.php?id=61556920111263&mibextid=ZbWKwL">
                      <img src="assets/images/facebook.png" class="hc-footer-icimg" alt="facebook" />
                    </a>
                  </div>
                  <div class="linkedin">
                    <a href="https://www.youtube.com/@plexusorthotech">
                      <img src="assets/images/youtube.png" class="hc-footer-icimg" alt="google" />
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="hc-footer-second" data-aos="faade-up">
          <div class="hc-footer-btm-heading">
            <h3 class="hc-lin"> Quick Links</h3>
          </div>
          <div class="hc-footer-btm-links">
            <ul>
              <li>
                <a href="./about.html">About Us</a>
              </li>
              <li>
                <a href="./product.html?category_id=-1&subcategory_id=-1">Product</a>
              </li>
              <li>
                <a href="./video.html">video</a>
              </li>
              <li>
                <a href="./contact.html">Contact Us</a>
              </li>
              <li>
                <a href="./career.html">Career</a>
              </li>
            </ul>
          </div>
        </div>
        <div class="hc-footer-second" data-aos="faade-up">
          <div class="hc-footer-btm-heading">
            <h3>Opening Hours</h3>
          </div>
          <div class="hc-footer-btm-links hc-footerbtm">
            <ul>
              <li class="hc-list">
                <a href="javascript:;">Mon-Tue</a>
                <div class="hc-listtext">
                  <a href="javascript:;" class="hc-time">09:00 AM - 06:00 PM</a>
                </div>
              </li>
              <li class="hc-list">
                <a href="javascript:;">Wed-Thu</a>
                <div class="hc-listtext">
                  <a href="javascript:;" class="hc-time">09:00 AM - 06:00 PM</a>
                </div>
              </li>
              <li class="hc-list">
                <a href="javascript:;">Fri-Sat</a>
                <div class="hc-listtext">
                  <a href="javascript:;" class="hc-time">09:00 AM - 06:00 PM</a>
                </div>
              </li>
              <li class="hc-list">
                <a href="javascript:;">Sunday</a>
                <div class="hc-listtext">
                  <a href="javascript:;" class="hc-time">Emergency Only</a>
                </div>
              </li>
              <li class="hc-list">
                <a href="javascript:;">Personal</a>
                <div class="hc-listtext">
                  <a href="javascript:;" class="hc-time">After 02:00 PM</a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- copyright section start -->
      <div class="hc-copyright-wrapper">
        <p class="hc-paragraph hs-paragraph-copy "> Copyright © 2024 <a href="https://topgrowth.in/"
            target="_blank">TopGrowth.in</a>. All Right Reserved</p>
      </div>
      <!-- copyright section end -->
    </div>
  </div>
  <!-- footer section end -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="assets/js/jquery.min.js"></script>

  <script>
    $(document).ready(function () {
      $(".overlay").click(function () {
        $("body").toggleClass("menu-open");
        $(this).removeClass("is-visible");
      })

      let active_subcategory = '';
      let products;
      let categories;
      const bredcrum = document.getElementById('bredcrum');
      const product_breadcrumb = $('#product-breadcrumb');
      let params = '';
      const categoryImgUrl = ["orthopedic implants.png", "Craniomaxillofacial Implants.png", "Spine Implants.png", "Arthroscopic Implants.png", "External Fixator.png", "Hip Prosthesis.png", "MAxillofacial Instruments.png"]
      // Function to get URL parameters
      function getUrlParams() {
        const params = {};
        const queryString = window.location.search.slice(1);
        const pairs = queryString.split("&");

        for (const pair of pairs) {
          if (pair) {
            const [key, value] = pair.split("=");
            params[decodeURIComponent(key)] = decodeURIComponent(value || "");
          }
        }
        return params;
      }

      // Function to populate categories
      function populateCategories(categories) {
        const categoryList = $('#category-list');
        categoryList.empty();
        categories.forEach(category => {
          const categoryItem = `<li>${category.name}</li>`;
          categoryList.append(categoryItem);
        });
      }

      // Function to populate products
      function populateProducts(products) {
        const productList = $('#product-list');
        productList.empty();
        if (products.length === 0) {
          product_breadcrumb.removeClass('d-none');
          return;
        }
        products.forEach(product => {
          const productItem = `
            <div data-aos="zoom-in" class="clickable-product" data-id="${product.id}" style="cursor:pointer">
              <div class="hc-service-card">
                <div class="hc-sercardimg hc-servone">
                  <img src='./admin/images/${product.image}' loading="lazy" class="hc-service_img" alt="${product.name}" />
                </div>
                <h4>${product.name}</h4>
              </div>
            </div>`;
          productList.append(productItem);
        });

        productList.off('click').on('click', '.clickable-product', function () {
          const id = $(this).data('id');
          // get product data from products array
          const product = products.find(product => product.id == id);
          // populate product details in modal
          $('#productModal').modal('show');

          $('#pop_up_image').attr('src', `./admin/images/${product.image}`);
          $('#productModalLabel').text(product.name);
          $('#product_id').text(product.ct_id);
          $('#product_desc').text(product.description);
        });
      }



      function populateClickebalProduct(products, isCategory = false) {
        const productList = $('#product-list');
        productList.empty();

        if (products.length !== 0) {
          product_breadcrumb.addClass('d-none');
        }

        const fragment = $(document.createDocumentFragment());

        products.forEach(product => {
          const productItem = `
            <div data-aos="zoom-in" class="clickable-product" data-id="${product.id}">
                <div class="hc-service-card">
                    <div class="hc-sercardimg hc-servone">
                        <img src='${product.image}' loading="lazy" class="hc-service_img rounded" alt="${product.name}" />
                    </div>
                    <h4 class="mt-2">${product.name}</h4>
                </div>
            </div>`;
          fragment.append(productItem);
        });

        productList.append(fragment);

        // Use event delegation to handle clicks on dynamically added elements
        productList.off('click').on('click', '.clickable-product', function () {
          const id = $(this).data('id');
          if (isCategory) {
            params.category_id = `${id}`;
          } else {
            console.log("subcategory id", id, "hit");
            params.subcategory_id = `${id}`;
          }
          console.log(params);
          filterData(params);
        });
      }

      function createBreadCume(category, subcategory, category_id, subcategory_id) {
        // Clear previous breadcrumb content
        bredcrum.innerHTML = '';

        if (category === -1 && subcategory === -1) {
          const span1 = document.createElement('span');
          span1.innerText = "Product"; // Set inner text to "Product"
          span1.style.cursor = 'pointer'; // Change cursor on hover
          span1.onclick = function () {
            params.subcategory_id = -1;
            params.category_id = -1; // Example action: Reset category_id and subcategory_id
            filterData(params); // Call filterData function with updated params
          };
          bredcrum.appendChild(span1);
          return;
        }

        // Create span tag for "Product"
        const span1 = document.createElement('span');
        span1.innerText = "Product"; // Set inner text to "Product"
        span1.style.cursor = 'pointer'; // Change cursor on hover
        span1.onclick = function () {
          params.subcategory_id = -1;
          params.category_id = -1; // Example action: Reset category_id and subcategory_id
          filterData(params); // Call filterData function with updated params
        };
        bredcrum.appendChild(span1); // Append span to breadcrumb

        // Add separator
        const separator1 = document.createTextNode(' > ');
        bredcrum.appendChild(separator1);

        // Create span tag for category
        const span2 = document.createElement('span');
        span2.innerText = category; // Set inner text to category
        span2.style.cursor = 'pointer'; // Change cursor on hover
        span2.onclick = function () {
          params.subcategory_id = -1;
          params.category_id = category_id; // Example action: Set category_id and reset subcategory_id
          filterData(params); // Call filterData function with updated params
        };
        bredcrum.appendChild(span2); // Append span to breadcrumb

        // Add subcategory if it exists
        if (subcategory) {
          const separator2 = document.createTextNode(' > ');
          bredcrum.appendChild(separator2);

          const span3 = document.createElement('span');
          span3.innerText = subcategory; // Set inner text to subcategory
          span3.style.cursor = 'pointer'; // Change cursor on hover
          span3.onclick = function () {
            params.subcategory_id = subcategory.id; // Example action: Set subcategory_id
            filterData(params); // Call filterData function with updated params
          };
          bredcrum.appendChild(span3); // Append span to breadcrumb
        }
      }


      // Function to filter and display data based on URL parameters
      function filterData(params) {
        console.log(params, "filter params")
        if (params.category_id != -1 && params.subcategory_id != -1) {
          const filteredCategories = categories.filter(category => category.id == params.category_id);
          const filteredSubcategories = filteredCategories[0].subcategories.filter(subcategory => subcategory.id == params.subcategory_id);
          createBreadCume(filteredCategories[0].name, filteredSubcategories[0].name, filteredCategories[0].id, filteredSubcategories[0].id);
          const tempProduct = getFilterProduct(params.category_id, params.subcategory_id, products);
          populateProducts(tempProduct);
          console.log("%c full filter apply", "color:red");
        }
        if (params.category_id != -1 && params.subcategory_id == -1) {
          const filteredCategories = categories.filter(category => category.id == params.category_id);
          createBreadCume(filteredCategories[0].name, null, filteredCategories[0].id, -1);
          // we have to get all the product related to this category_id
          const tempProduct = products.filter(product => product.category_id == params.category_id);
          // now i need to get one unique prodcut from ther subcategory 
          const uniqueProductArray = [];
          filteredCategories[0].subcategories.forEach(subcategory => {
            const tempProduct = products.filter(product => product.subcategory_id == subcategory.id);
            if (tempProduct.length <= 0) {
              uniqueProductArray.push({ name: subcategory.name, image: "./admin/images/notFound.png", id: subcategory.id })
            }
            else {
              uniqueProductArray.push({
                name: subcategory.name,
                image: `./admin/images/${tempProduct[0].image}`,
                id: subcategory.id
              });
            }
          });
          populateClickebalProduct(uniqueProductArray);
        }
        if (params.category_id == -1 && params.subcategory_id == -1) {
          const uniqueProduct = [];
          categories.forEach((category, index) => {
            uniqueProduct.push({
              name: category.name,
              image: categoryImgUrl[index] ? `./assets/images/category/try/${categoryImgUrl[index]}` : "./admin/images/notFound.png",
              id: category.id
            })
          });
          populateClickebalProduct(uniqueProduct, true);
          createBreadCume(-1, -1);
        }
      }


      function getFilterProduct(category_id, subcategory_id, product) {
        // put filter on product array 
        return product.filter(product => product.category_id == category_id && product.subcategory_id == subcategory_id);
      }

      function changeCategoryOrSubCategory(category_id, subcategory_id) {
        params.category_id = category_id;
        params.subcategory_id = subcategory_id;
        filterData(params);
      }

      function renderCategory(categoryData) {
        const mega_menu_row = document.getElementById('mega_menu_row');
        let html = '';

        categoryData.forEach((category) => {
          html += `<div class="mega-menu-column">
              <h3 class="category_heading">
                <a href="javascript:void(0);" class="category_link clickable-link" data-category_id='${category.id}' data-subcategory_id='-1'>${category.name}</a> <span><img src="./assets/images/down.png" width="15px"/></span>
              </h3>
              <ul>`;

          category.subcategories.forEach((subcategory, index) => {
            if (index < 7) {
              html += `<li><a href="javascript:void(0);" class="subcategory_link clickable-link" data-category_id='${category.id}' data-subcategory_id='${subcategory.id}'>${subcategory.name}</a></li>`;
            }
            if (index === 7) {
              html += `<li><a href="javascript:void(0);" class="subcategory_link clickable-link" data-category_id='${category.id}' data-subcategory_id='-1'>View More</a></li>`;
            }
          });

          html += `</ul></div>`;
        });

        mega_menu_row.innerHTML = html;
        // Add event listener for the clickable links
        const prdocut_nav = document.getElementsByClassName('prdocut_nav')[0];
        const product_menu = document.getElementById('product-menu');
        prdocut_nav.addEventListener('mouseover', function () {
          if (window.innerWidth > 991) {
            product_menu.classList.add('show_mega_menu');
          }
        });
        // if mouse leave from the product menu then remove the show_mega_menu class
        product_menu.addEventListener('mouseleave', function () {
          product_menu.classList.remove('show_mega_menu');
        });

        mega_menu_row.querySelectorAll('.clickable-link').forEach(link => {
          link.addEventListener('click', function () {

            product_menu.classList.remove('show_mega_menu');
            const category_id = this.getAttribute('data-category_id');
            const subcategory_id = this.getAttribute('data-subcategory_id');
            params.category_id = `${category_id}`;
            params.subcategory_id = `${subcategory_id}`;
            if (window.innerWidth <= 991) {
              if (subcategory_id != -1) {
                $("body").toggleClass("menu-open");
                filterData(params);
                document.getElementById('product-link-arrow').classList.toggle('active')
                product_menu.classList.toggle('active');
              }
            } else {
              filterData(params);
            }

          });
        });
      }

      // Function to fetch products and categories
      function fetchProducts() {
        $.ajax({
          url: './admin/includes/fetch_data.php',
          method: 'GET',
          dataType: 'json',
          success: function (response) {
            if (response.success) {
              products = response.data.products;
              categories = response.data.categories;
              params = getUrlParams();
              renderCategory(categories);
              filterData(params);
            } else {
              console.error('Error fetching data:', response.error);
            }
          },
          error: function (xhr, status, error) {
            console.error('AJAX error:', error);
          }
        });
      }

      // Initialize AOS
      AOS.init({
        offset: 170,
        duration: 1000,
      });


      // Fetch products on page load
      fetchProducts();
    });
  </script>
  <script>
    var customToggle = 0;
    document.addEventListener('DOMContentLoaded', function () {
      var productLink = document.getElementById('product-link');
      var productMenu = document.getElementById('product-menu');

      productLink.addEventListener('click', function (e) {
        e.preventDefault();
        if (window.innerWidth <= 990) {
          document.getElementById('product-link-arrow').classList.toggle('active')
          productMenu.classList.toggle('active');
        }

        if (customToggle == 0) {

          customToggle = 1;
          var categoryHeadings = document.querySelectorAll('.mega-menu-column h3');
          console.log(categoryHeadings);
          categoryHeadings.forEach(function (heading) {
            heading.addEventListener('click', function (e) {
              e.preventDefault();
              console.log("hello2")
              this.classList.toggle("open");
              var ul = this.nextElementSibling;
              console.log(ul);
              if (ul && ul.tagName === 'UL') {
                console.log("hello3")
                ul.classList.toggle('active');
              }
            });
          });
        }
      });



    });
  </script>

  <script src="assets/js/bootstrap.min.js"></script>
  <script src="assets/js/swiper-bundle.min.js"></script>
  <script src="assets/js/custom.js"></script>
  <script src="assets/js/form.js"></script>

  <script src="assets/js/jquery.nice-select.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js" crossorigin="anonymous"
    referrerpolicy="no-referrer"></script>
</body>

</html>