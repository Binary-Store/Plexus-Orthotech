<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product - Plexus Orthotech</title>

  <link href="assets/fonts/metropolis.css" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="assets/css/animate.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="shortcut icon" type="image/png" href="assets/images/favicon.png" />
  <link rel="stylesheet" href="assets/css/nice-select.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="assets/css/style.css" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
</head>

<body>
  <div class="hc-nav hc-sections">
    <div class="hc-container">
      <div class="hc-navmainhead">
        <div class="hc-navhead">
          <div class="hc-navheadcall">
            <img src="assets/images/phone.png" class=" ms_bar_img ms_bar_show" alt="logo" />
          </div>
          <div class="hcnavheadtext">
            <p class="hc-paragraph">For any question call us at <span> +91 94272 17406</span></p>
          </div>
        </div>
        <div class="hc-navheadicon">
          <div class="hc-faceicon">
            <img src="assets/images/facebook.png" class=" ms_bar_img ms_bar_show" alt="logo" />
          </div>
          <div class="hc-faceicon">
            <img src="assets/images/instagram.png" class=" ms_bar_img ms_bar_show" alt="logo" />
          </div>
          <div class="hc-faceicon">
            <img src="assets/images/twiter.png" class=" ms_bar_img ms_bar_show" alt="logo" />
          </div>
          <div class="hc-faceicon">
            <img src="assets/images/linkedin.png" class=" ms_bar_img ms_bar_show" alt="logo" />
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="hc-header-wrapper hc-sections">
    <div class="hc-container">
      <div class="hc-navbar-wrapper">
        <div class="hc-brand-logo" data-aos="faade-up">
          <a href="./index.html">
            <img src="assets/images/logo.png" class="hc-logo" alt="logo" />
          </a>
          <div class="hc-toggle-btn">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
        <div class="hc-navbar-menu">
          <ul>
            <li class="responsive-logo" data-aos="fade-down">
              <a href="./index.html">
                <img src="assets/images/logo.png" />
              </a>
            </li>
            <li data-aos="fade-down" data-aos-delay="200">
              <a href="./index.html" class="nav_bar_list">Home</a>
            </li>
            <li data-aos="fade-down" data-aos-delay="400">
              <a href="./about.html">About Us</a>
            </li>
            <li class="prdocut_nav">
              <a href="#" class="nav_bar_list" id="product-link">Product <span id="product-link-arrow"><img src="./assets/images/down.png" width="20px"/></span></a>
              <div class="mega-menu-container" id="product-menu">
                <div class="mega-menu">
                  <div class="mega-menu-row" id="mega_menu_row">

                  </div>
                </div>
              </div>
            </li>
            <li data-aos="fade-down" data-aos-delay="700">
              <a href="./brochures.html" class="nav_bar_list">Brochures</a>
            </li>
            <li data-aos="fade-down" data-aos-delay="800">
              <a href="./video.html" class="nav_bar_list">Video</a>
            </li>
            <li data-aos="fade-down" data-aos-delay="900">
              <a href="./channelPartner.html" class="nav_bar_list">Channel Partner</a>
            </li>
            <li data-aos="fade-down" data-aos-delay="1000">
              <a href="./career.html" class="nav_bar_list">Career</a>
            </li>
            <li data-aos="fade-down" data-aos-delay="1000">
              <a href="./contact.html" class="nav_bar_list">Contact Us</a>
            </li>

          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- product section start -->
  <div class="hc-faq-wrapper hc-sections ">
    <div class="container">
      <div class="hc-news-top">
        <h6 class="hc-news-subhead" data-aos="fade-down">Our Product</h6>
        <h4 class="hc-news-heading" data-aos="fade-down">The Product We Offer</h4>
        <p class="hc-paragraph" data-aos="zoom-in" data-aos-delay="400">Discover our high-quality products designed to
          meet your every need.</p>
        <h6 class="mt-4" id="bredcrum"></h6>
      </div>
      <div class="product-container">
        <!-- <div class="product-sidebar" data-aos="fade-up" data-aos-delay="400">
          <ul id="category-list">
            Dynamic categories and subcategories will be appended here
          </ul>
        </div> -->
        <div class="product-content">
          <div class="product-breadcrumb text-center d-none" id="product-breadcrumb">Products will be Available soon.
          </div>
          <div class="hc-service-row" id="product-list">
            <!-- Dynamic products will be appended here -->

          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- product section end -->
  <!-- footer section start -->
  <div class="hc-footer-wrapper  hc-sections">
    <div class="container">
      <div class="hc-newsletterbox">
        <div class="hc-newsleter-text">
          <h2 class="hc-newsleter-main">Subscribe Our Newsletter</h2>
          <p class="hc-paragraph">Subscribe to our newsletter to get regular update about online medical
            sessions. Get latest news in your inbox.</p>
          <div class="hc-newsletrinput hc-newsfirst">
            <form id="myForm2" onsubmit="sendEmail(event)">
              <input type="email" placeholder="Your Email Here." name="email" id="lname" class="hc-input" />
              <div class="hc-nesbtn">
                <button type="submit" class="hc-bnrbtn">Subscribe
                  <img src="assets/images/rightarrow.png" class="hc-rightarrow" alt="rightarrow" />
                </button>
              </div>
              <div id="submittingforrmail" style="display: none; color: white;">
                Subscribing....
              </div>
              <div id="notificationforemail" style="display: none; color: white">
                Subscribe Successfully
              </div>
            </form>
          </div>
        </div>
        <div class="hc-newsletrimg">
          <img src="assets/images/newsletter.png" class="hc-newsleter_img" alt="newsleter" />
          <div class="hc-newsletrinput hc-newssecond">
            <input type="email" placeholder="Your Email Here..." id="newsemail" class="hc-input" />
            <div class="hc-nesbtn">
              <a href="javascript:;" class="hc-bnrbtn">Subscribe
                <img src="assets/images/rightarrow.png" class="hc-rightarrow" alt="rightarrow" />
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="hc-footer-row">
        <div class="hc-footer-rowin" data-aos="faade-up">
          <div class="hc-footer-first">
            <div class="hc-footer-logo hc-boxcontain">
              <a href="./index.html" class="hc-footer-img">
                <img src="assets/images/logo.png" class="hc-footer-mainlogo" alt="logo" />
              </a>
              <div class="hc-footer-btm-links">
                <p class="hc-paragraph">Subscribed to our newsletter to get regular update about our
                  courses. Get latest news in your inbox.</p>
              </div>
              <div class="hcflwtext">
                <div class="hc-footer-Icon">
                  <div class="linkedin">
                    <a href="javascript:;">
                      <img src="assets/images/facebook.png" class="hc-footer-icimg" alt="facebook" />
                    </a>
                  </div>
                  <div class="linkedin">
                    <a href="javascript:;">
                      <img src="assets/images/instagram.png" class="hc-footer-icimg" alt="google" />
                    </a>
                  </div>
                  <div class="linkedin">
                    <a href="javascript:;">
                      <img src="assets/images/twiter.png" class="hc-footer-icimg" alt="twitter" />
                    </a>
                  </div>
                  <div class="linkedin">
                    <a href="javascript:;">
                      <img src="assets/images/linkedin.png" class="hc-footer-icimg" alt="whtaspp" />
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="hc-footer-second" data-aos="faade-up">
          <div class="hc-footer-btm-heading">
            <h3 class="hc-lin"> Quick Links</h3>
          </div>
          <div class="hc-footer-btm-links">
            <ul>
              <li>
                <a href="./about.html">About Us</a>
              </li>
              <li>
                <a href="./product.html">Product</a>
              </li>
              <li>
                <a href="./video.html">video</a>
              </li>
              <li>
                <a href="./contact.html">Contact Us</a>
              </li>
              <li>
                <a href="./career.html">Career</a>
              </li>
            </ul>
          </div>
        </div>
        <div class="hc-footer-second" data-aos="faade-up">
          <div class="hc-footer-btm-heading">
            <h3>Opening Hours</h3>
          </div>
          <div class="hc-footer-btm-links hc-footerbtm">
            <ul>
              <li class="hc-list">
                <a href="javascript:;">Mon-Tue</a>
                <div class="hc-listtext">
                  <a href="javascript:;" class="hc-time">08:00 AM - 05:00 PM</a>
                </div>
              </li>
              <li class="hc-list">
                <a href="javascript:;">Wed-Thu</a>
                <div class="hc-listtext">
                  <a href="javascript:;" class="hc-time">08:00 AM - 05:00 PM</a>
                </div>
              </li>
              <li class="hc-list">
                <a href="javascript:;">Fri-Sat</a>
                <div class="hc-listtext">
                  <a href="javascript:;" class="hc-time">08:00 AM - 05:00 PM</a>
                </div>
              </li>
              <li class="hc-list">
                <a href="javascript:;">Sunday</a>
                <div class="hc-listtext">
                  <a href="javascript:;" class="hc-time">Emergency Only</a>
                </div>
              </li>
              <li class="hc-list">
                <a href="javascript:;">Personal</a>
                <div class="hc-listtext">
                  <a href="javascript:;" class="hc-time">After 02:00 PM</a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- copyright section start -->
      <div class="hc-copyright-wrapper">
        <p class="hc-paragraph hs-paragraph-copy "> Copyright Â© 2024 <a href="https://topgrowth.in/"
            target="_blank">TopGrowth.in</a>. All Right Reserved</p>
      </div>
      <!-- copyright section end -->
    </div>
  </div>
  <!-- footer section end -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="assets/js/jquery.min.js"></script>

  <script>
    $(document).ready(function () {
      let active_subcategory = '';
      let products;
      let categories;
      const bredcrum = document.getElementById('bredcrum');
      const product_breadcrumb = $('#product-breadcrumb');
      let params = '';

      // Function to get URL parameters
      function getUrlParams() {
        const params = {};
        const queryString = window.location.search.slice(1);
        const pairs = queryString.split("&");

        for (const pair of pairs) {
          if (pair) {
            const [key, value] = pair.split("=");
            params[decodeURIComponent(key)] = decodeURIComponent(value || "");
          }
        }
        return params;
      }

      // Function to populate categories
      function populateCategories(categories) {
        const categoryList = $('#category-list');
        categoryList.empty();
        categories.forEach(category => {
          const categoryItem = `<li>${category.name}</li>`;
          categoryList.append(categoryItem);
        });
      }

      // Function to populate products
      function populateProducts(products) {
        const productList = $('#product-list');
        productList.empty();
        if (products.length === 0) {
          product_breadcrumb.removeClass('d-none');
          return;
        }
        products.forEach(product => {
          const productItem = `
            <div data-aos="zoom-in">
              <div class="hc-service-card">
                <div class="hc-sercardimg hc-servone">
                  <img src='./admin/images/${product.image}' loading="lazy" class="hc-service_img" alt="${product.name}" />
                </div>
                <h4>${product.name}</h4>
              </div>
            </div>`;
          productList.append(productItem);
        });
      }



      function populateClickebalProduct(products) {
        const productList = $('#product-list');
        productList.empty();
        if (products.length != 0) {
          product_breadcrumb.addClass('d-none');
        }
        products.forEach(product => {
          const productItem = `
            <div data-aos="zoom-in" class="clickable-product" data-id="${product.id}">
              <div class="hc-service-card">
                <div class="hc-sercardimg hc-servone">
                  <img src='./admin/images/${product.image}' loading="lazy" class="hc-service_img" alt="${product.name}" />
                </div>
                <h4>${product.name}</h4>
              </div>
            </div>`;
          productList.append(productItem);

        });
        productList.on('click', '.clickable-product', function () {
          const id = $(this).data('id');
          params.subcategory_id = `${id}`;
          filterData(params);
        });

      }

      function createBreadCume(category, subcategory) {
        // Create span tag
        const span = document.createElement('span');
        span.onclick = function () {
          params.subcategory_id = -1;
          filterData(params);
        }
        span.innerText = category;
        span.style.cursor = 'pointer';

        // Clear previous breadcrumb content
        bredcrum.innerHTML = '';

        // Append span to breadcrumb
        bredcrum.appendChild(span);

        // Add subcategory if it exists
        if (subcategory) {
          const subcategoryText = document.createTextNode(` > ${subcategory}`);
          bredcrum.appendChild(subcategoryText);
        }

      }


      // Function to filter and display data based on URL parameters
      function filterData(params) {
        if (params.category_id && params.subcategory_id != -1) {
          const filteredCategories = categories.filter(category => category.id == params.category_id);
          const filteredSubcategories = filteredCategories[0].subcategories.filter(subcategory => subcategory.id == params.subcategory_id);
          createBreadCume(filteredCategories[0].name, filteredSubcategories[0].name);
          const tempProduct = getFilterProduct(params.category_id, params.subcategory_id, products);
          populateProducts(tempProduct);
        }
        if (params.category_id && params.subcategory_id == -1) {
          const filteredCategories = categories.filter(category => category.id == params.category_id);
          createBreadCume(filteredCategories[0].name);
          // we have to get all the product related to this category_id
          const tempProduct = products.filter(product => product.category_id == params.category_id);
          // now i need to get one unique prodcut from ther subcategory 
          const uniqueProductArray = [];
          filteredCategories[0].subcategories.forEach(subcategory => {
            const tempProduct = products.filter(product => product.subcategory_id == subcategory.id);
            if (tempProduct.length <= 0) {
              uniqueProductArray.push({ name: subcategory.name, image: "notFound.png", id: subcategory.id })
            }
            else {
              uniqueProductArray.push({
                name: subcategory.name,
                image: tempProduct[0].image,
                id: subcategory.id
              });
            }
          });
          populateClickebalProduct(uniqueProductArray);
        }
      }


      function getFilterProduct(category_id, subcategory_id, product) {
        // put filter on product array 
        return product.filter(product => product.category_id == category_id && product.subcategory_id == subcategory_id);
      }

      function changeCategoryOrSubCategory(category_id, subcategory_id) {
        params.category_id = category_id;
        params.subcategory_id = subcategory_id;
        filterData(params);
      }

      function renderCategory(categoryData) {
        const mega_menu_row = document.getElementById('mega_menu_row');
        let html = '';

        categoryData.forEach((category) => {
          html += `<div class="mega-menu-column">
              <h3 class="category_heading">
                <a href="javascript:void(0);" class="category_link clickable-link" data-category_id='${category.id}' data-subcategory_id='-1'>${category.name}</a> <span><img src="./assets/images/down.png" width="15px"/></span>
              </h3>
              <ul>`;

          category.subcategories.forEach((subcategory, index) => {
            if (index < 7) {
              html += `<li><a href="javascript:void(0);" class="subcategory_link clickable-link" data-category_id='${category.id}' data-subcategory_id='${subcategory.id}'>${subcategory.name}</a></li>`;
            }
            if (index === 7) {
              html += `<li><a href="javascript:void(0);" class="subcategory_link clickable-link" data-category_id='${category.id}' data-subcategory_id='-1'>View More</a></li>`;
            }
          });

          html += `</ul></div>`;
        });

        mega_menu_row.innerHTML = html;
        // Add event listener for the clickable links
        mega_menu_row.querySelectorAll('.clickable-link').forEach(link => {
          link.addEventListener('click', function () {

            document.getElementById('product-menu').style.display = 'none';
            const category_id = this.getAttribute('data-category_id');
            const subcategory_id = this.getAttribute('data-subcategory_id');
            params.category_id = `${category_id}`;
            params.subcategory_id = `${subcategory_id}`;
            console.log(params, "this is from render category")
            filterData(params);
          });
        });
      }

      // Function to fetch products and categories
      function fetchProducts() {
        $.ajax({
          url: './admin/includes/fetch_data.php',
          method: 'GET',
          dataType: 'json',
          success: function (response) {
            if (response.success) {
              products = response.data.products;
              categories = response.data.categories;
              params = getUrlParams();
              renderCategory(categories);
              filterData(params);
            } else {
              console.error('Error fetching data:', response.error);
            }
          },
          error: function (xhr, status, error) {
            console.error('AJAX error:', error);
          }
        });
      }

      // Initialize AOS
      AOS.init({
        offset: 170,
        duration: 1000,
      });


      // Fetch products on page load
      fetchProducts();
    });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var productLink = document.getElementById('product-link');
      var productMenu = document.getElementById('product-menu');
      console.log("hello1")
      productLink.addEventListener('click', function (e) {
        e.preventDefault();
        if (window.innerWidth <= 990) {
          document.getElementById('product-link-arrow').classList.toggle('active')
          productMenu.classList.toggle('active');
        }
        var categoryHeadings = document.querySelectorAll('.mega-menu-column h3');
        categoryHeadings.forEach(function (heading) {
          heading.addEventListener('click', function (e) {
            e.preventDefault();
            this.classList.toggle("open");
            var ul = this.nextElementSibling;
            if (ul && ul.tagName === 'UL') {
              ul.classList.toggle('active');
            }
          });
        });
      });


      
    });
  </script>

  <script src="assets/js/bootstrap.min.js"></script>
  <script src="assets/js/swiper-bundle.min.js"></script>
  <script src="assets/js/custom.js"></script>
  <script src="assets/js/form.js"></script>

  <script src="assets/js/jquery.nice-select.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js" crossorigin="anonymous"
    referrerpolicy="no-referrer"></script>
</body>

</html>